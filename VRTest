local Players = game:GetService("Players"); 
local RunService = game:GetService("RunService");
local VRService = game:GetService("VRService");

local LP = Players.LocalPlayer
local CurrentCamera = workspace.CurrentCamera 

local SyncAPI = LP.Backpack:FindFirstChild("SyncAPI", true); 
local ServerEndpoint = SyncAPI.ServerEndpoint

local HelperFuncs, SyncModule = {}, require(SyncAPI.SyncModule); 

LP.Character.UpperTorso:ClearAllChildren(); 
LP.Character.LowerTorso:Destroy(); 

HelperFuncs.PerformAction_Server = function(ActionName, ...)
      return ServerEndpoint:InvokeServer(ActionName, ...); 
end 

HelperFuncs.PerformAction_Client = function(ActionName, ...)
      return SyncModule.PerformAction(LP, ActionName, ...); 
end 

local LHand = HelperFuncs.PerformAction_Server("CreatePart", "Normal", CFrame.new(), LP.Character); 
local RHand = HelperFuncs.PerformAction_Server("CreatePart", "Normal", CFrame.new(), LP.Character); 

local Head = HelperFuncs.PerformAction_Server("CreatePart", "Normal", CFrame.new(), LP.Character);

RunService.RenderStepped:Connect(function()
      local LHandOffset = VRService:GetUserCFrame(Enum.UserCFrame.LeftHand); 
      local RHandOffset = VRService:GetUserCFrame(Enum.UserCFrame.RightHand);

      local Changes = {
		{
			Part = LHand,
			Anchored = false,
			CFrame = CurrentCamera.CFrame * LHandOffset.Rotation + LHandOffset.Position * CurrentCamera.HeadScale 
		},
		{
			Part = RHand,
			Anchored = false,
			CFrame = CurrentCamera.CFrame * RHandOffset.Rotation + RHandOffset.Position * CurrentCamera.HeadScale 
		}
	}
      HelperFuncs.PerformAction_Server("SyncMove", Changes); 
end); 

